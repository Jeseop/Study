22.04.27

14장 전역 변수의 문제점

전역변수보다 지역변수를 써야한다.

14.1 변수의 생명주기

생명주기(life cycle) : 생물과 유사하게 생성되고 소멸되는 주기

 1) 지역변수의 생명주기
 전역변수의 생명주기는 애플리케이션의 생명 주기. 지역변수의 생명주기는 함수의 생명주기.
 호이스팅은 스코프를 단위로 동작함. 호이스팅은 변수 선언이 스코프의 선두로 끌어올려진 것처럼 동작하는 자바스크립트 고유의 특징.
 
 2) 전역변수의 생명주기
 전역 코드는 특별한 진입점 없고 코드가 로드되자마자 바로 해석되고 실행됨. 더 이상 실행할 문이 없을 때 종료함.
 var 키워드로 선언한 전역 변수의 생명 주기는 전역 객체의 생명 주기와 일치.
 
14.2 전역 변수의 문제점

 1) 암묵적 결합(implicit coupling)
 모든 코드가 전역 변수를 참조하고 변경할 수 있도록 허용하는 것. 변수의 유효 범위가 커질수록 코드의 가독성이 나빠지고 의도치 않게 상태가 변경될 수 있는 가능성이 높아짐.

 2) 긴 생명주기
 전역변수는 생명 주기가 길다. 그래서 메모리 리소스를 오랫동안 차지한다.
 더욱이 var 키워드로 선언한 변수는 중복선언을 허용하기에 생명주기가 긴 전역 변수는 변수 이름이 중복될 가능성이 있다. 변수 이름이 중복되면 의도치 않은 재할당이 이루어진다.

 3) 스코프 체인 상에서 종점
 변수를 검색할 때 전역 변수가 가장 마지막에 검색되기에 전역 변수의 검색 속도가 가장 느리다.

 4) 네임스페이스 오염
 파일 내에서 동일한 이름으로 명명된 전역변수나 전역함수가 같은 스코프 내에 존재할 경우 예상치 못한 결과를 가져올 수 있다.